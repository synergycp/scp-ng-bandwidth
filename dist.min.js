!function(){"use strict";angular.module("scp.bandwidth",[])}(),function(){"use strict";function t(t){return function(n){return t(1.1*n).format("0,0b")}}t.$inject=["numeral"],angular.module("scp.bandwidth").filter("bitsToSize",t)}(),function(){"use strict";function t(t,a){return function(){return new n(t,a)}}function n(t,n){function e(t){_.setContents(d.rawLabels,t),c(d.width)}function r(n){return t(n).format("0,0.00b").toLowerCase()+"ps"}function i(t){d.hasData&&(o(d.rawData,t),d.hasFilteredData=d.rawData.length&&d.rawData[0].length,c(d.width))}function s(e){if(d.showStats=!!e.length,d.showStats){var i=0,s=t(0);_.each(e,function(n,e){var u=t(n.sum),o=(t(n.avg),t(n.min)),c=t(n.max),l=n.nf;s.add(u),i=Math.max(i,l);var f=d.stats.cols[e]=d.stats.cols[e]||{label:e%2?"OUT":"IN",items:[]},m=f.items;m[0]=(m[0]||new a("MIN")).setValue(r(o)),m[1]=(m[1]||new a("MAX")).setValue(r(c)),m[2]=(m[2]||new a("TOP")).setValue(r(l))});var o=e.length,c=d.stats.cols[o]=d.stats.cols[o]||{label:"TOTAL",items:[]},l=c.items;l[0]=(l[0]||new a("TOTAL")).setValue(n(s)),l[1]=(l[1]||new a("TOP-MAX")).setValue(r(i)),u(i)}}function u(t){var n=d.rawData.length,a=d.dataSetOptions;d.data[n]=_.makeArray(d.data[0].length,t),a[n]=a[n]||{},_.assign(a[n],{fill:!1,borderColor:"#f00",pointRadius:0})}function o(t,n){t.length=n.length,_.each(n,function(n,a){d.dataSetOptions[a]={};var e=t[a];return"undefined"==typeof e?void(t[a]=n):void _.setContents(e,n)})}function c(t){function n(t){return moment.unix(t).format(o)}var a=d.rawLabels.length,e=t/(t>1e3?20:11);l=Math.ceil(a/e);var r,i,s=moment.unix(d.rawLabels[0]),u=moment.unix(d.rawLabels[a-1]),o=s.isSame(u,"day")?"HH:mm":"M/DD HH:mm",c=d.rawData.length,f=Array.apply(null,Array(c)).map(Number.prototype.valueOf,0);for(i=0;i<c;i++)d.data[i]=d.data[i]||[];for(var m=-1,h=0;h<a;h++)for(r=l&&(h+1)%l>0,r||(m++,d.labels[m]=n(d.rawLabels[h])),i=0;i<c;i++)f[i]+=d.rawData[i][h]||0,r||(d.data[i][m]=Math.round(f[i]/(l||1)),f[i]=0)}var d=this,l=1;d.isActive=!1,d.firstLoad=!0,d.hasData=!1,d.hasFilteredData=!1,d.data=[],d.labels=[],d.series=["In","Out","95%"],d.options={elements:{point:{hitRadius:4}},tooltips:{callbacks:{label:function(t,n){return n.datasets[t.datasetIndex].label+": "+r(t.yLabel)}}},scales:{yAxes:[{ticks:{callback:function(t,n,a){return r(t)}}}]}},d.width=1800,d.height=350,d.rawData=[],d.rawLabels=[],d.showStats=!1,d.dataSetOptions=[],d.setData=i,d.stats={set:s,cols:[]},d.setLabels=e,d.addTopPctLine=u}function a(t){function n(t){return a.value=t,a}var a=this;return a.label=t,a.setValue=n,a}t.$inject=["numeral","bitsToSizeFilter"],angular.module("scp.bandwidth").factory("BandwidthChart",t)}(),function(){"use strict";function t(t){return t.moment}function n(t){return t.numeral}t.$inject=["$window"],n.$inject=["$window"],angular.module("scp.bandwidth").factory("moment",t).factory("numeral",n)}(),function(){"use strict";function t(t,e,r,i){return function(s){return new n(i.assign({},a,s||{}),t,r(),e,i)}}function n(t,n,a,e,r){function i(t){return r.assign(b.opts,t),b}function s(){b.options=t,b.range=b.options.defaultRange,b.isSetup=!1,b.input={startDate:b.start=b.defaultStartTime(),endDate:b.end=b.defaultEndTime()},b.min=void 0,b.max=n().add(5,"minutes").format("YYYY-DD-MM"),b.opts={ranges:y,format:"YYYY-DD-MM",startDate:b.start,endDate:b.end,timePicker:!0,timePicker24Hour:!0,eventHandlers:{"apply.daterangepicker":function(){b.setRange(b.input.startDate,b.input.endDate)}}},a.bindTo(b),b.on("change",u)}function u(){b.range=b.getLabel()}function o(t,a){b.fire("change",b.input.startDate=b.start=n(t),b.input.endDate=b.end=n(a))}function c(t){return b.min=t?n.unix(t).format("YYYY-DD-MM"):void 0,b}function d(t){return b.max=t?n.unix(t).format("YYYY-DD-MM"):void 0,b}function l(){return b.start}function f(){return b.end}function m(){return b.getRanges()[b.options.defaultRange][0]}function h(){return b.getRanges()[b.options.defaultRange][1]}function g(){return y}function p(){function t(t){return t[0].isSame(b.input.startDate)&&t[1].isSame(b.input.endDate)}var n=r.find(b.getRanges(),function(n,a){if(t(n))return b.range=a,!0});return n||(b.range=w()),b.range}function w(){return b.start.format("M/DD HH:mm")+" - "+b.end.format("M/DD HH:mm")}var b=this,D=n.duration(30,"minutes"),v=e.round(n(),D,"ceil"),L=e.round(n().subtract(1,"hours"),D,"floor"),y={"Last Hour":[L,v],"Last 6 Hours":[n(v).subtract(6,"hours"),v],"Last Day":[n(v).subtract(1,"day"),v],"Last Week":[n(v).subtract(1,"week"),v],"Last Month":[n(v).subtract(1,"month"),v]};b.setOptions=i,b.setRange=o,b.setMinTime=c,b.setMaxTime=d,b.startTime=l,b.endTime=f,b.defaultStartTime=m,b.defaultEndTime=h,b.getRanges=g,b.getLabel=p,s()}t.$inject=["moment","date","EventEmitter","_"];var a={refresh:function(){},defaultRange:"Last 6 Hours"};angular.module("scp.bandwidth").factory("BandwidthFilter",t)}(),function(){"use strict";angular.module("scp.bandwidth").component("bandwidthGraph",{require:{},bindings:{target:"=",filter:"=",state:"=",chart:"=",type:"@"},controller:"BandwidthGraphCtrl as bandwidth",transclude:!0,templateUrl:"scp/bandwidth/bandwidth.graph.html"})}(),function(){"use strict";function t(){function t(){}var n=this;n.$onInit=t}angular.module("scp.bandwidth").controller("BandwidthGraphCtrl",t)}(),function(){"use strict";function t(t,a){a.each([{name:"numeral",files:[n+"numeral/min/numeral.min.js"]},{name:"moment",files:[n+"moment/moment.js"]},{name:"chart-js",files:[n+"chart.js/dist/Chart.min.js"]},{name:"ng-chart-js",files:[n+"angular-chart.js/dist/angular-chart.min.js"]},{name:"date-range-picker",files:[n+"bootstrap-daterangepicker/daterangepicker.js",n+"bootstrap-daterangepicker/daterangepicker.css",n+"angular-daterangepicker/js/angular-daterangepicker.js"]}],Array.prototype.push.bind(t.modules))}t.$inject=["APP_REQUIRES","_"];var n="vendor/scp-ng-bandwidth/node_modules/";angular.module("scp.bandwidth").config(t)}(),function(){"use strict";function t(t){return function(){return new n(t())}}function n(t){var n=this;n.loader=t,n.fullScreen=!1}t.$inject=["Loader"],angular.module("scp.bandwidth").factory("BandwidthState",t)}();
angular.module("scp.bandwidth").run(["$templateCache",function(a){a.put("scp/bandwidth/bandwidth.graph.html",'<div class="panel-body text-center" ng-if="!bandwidth.chart.isActive &amp;&amp; !bandwidth.chart.firstLoad"><h3 translate="bandwidth.not-enabled.TITLE" translate-value-name="{{ bandwidth.target.name }}"></h3><p translate="bandwidth.not-enabled.TEXT" translate-value-type="{{ bandwidth.type }}"></p></div><div ng-if="bandwidth.chart.isActive || bandwidth.chart.firstLoad" ng-class="{ transparent: bandwidth.chart.loading }"><div class="panel-body text-center" ng-if="!bandwidth.chart.hasData &amp;&amp; !bandwidth.chart.firstLoad"><h3 translate="bandwidth.no-data.TITLE"></h3><p translate="bandwidth.no-data.TEXT" translate-value-name="{{ bandwidth.target.name }}"></p></div><div class="panel-body text-center" ng-if="bandwidth.chart.hasData &amp;&amp; !bandwidth.chart.hasFilteredData"><h3 translate="bandwidth.no-data-period.TITLE"></h3><p translate="bandwidth.no-data-period.TEXT" translate-value-period="{{ bandwidth.filter.range }}"></p></div><div class="bandwidth-plot-holder" ng-if="(bandwidth.chart.isActive &amp;&amp; bandwidth.chart.hasFilteredData) || bandwidth.chart.firstLoad"><canvas class="chart chart-line bandwidth-plot" chart-data="bandwidth.chart.data" chart-labels="bandwidth.chart.labels" chart-series="bandwidth.chart.series" chart-options="bandwidth.chart.options" chart-dataset-override="bandwidth.chart.dataSetOptions" width="{{bandwidth.chart.width}}" height="{{bandwidth.chart.height}}"></canvas></div></div>')}]);